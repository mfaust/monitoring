#
#
# maintainer         CoreMedia
# maintainer_email   bodo.schulz@coremedia.com
# license            Copyright (C) 2016, CoreMedia AG proprietary License, all rights reserved.
# description        includes icinga2 Checks for CoreMedia specific checks
# version            1.0.2
# ----------------------------------------------------------------------------------------

# enable checks for CoreMedia Feeder (live, preview and content)
#
object CheckCommand "cm_feeder" {
  import "plugin-check-command"

  command = [ PluginDir + "/check_cm_feeder_status" ]

  arguments = {
    "--host" = "$host$"
    "--feeder" = "$feeder$"
  }
}

# enable Checks for Memory (heap and perm)
#
object CheckCommand "cm_memory" {
  import "plugin-check-command"

  command = [ PluginDir + "/check_cm_memory_cache" ]

  arguments = {
    "--host"   = "$host$"
    "--port"   = "$port$"
    "--memory" = "$memory$"
  }
}

# enable Checks for Caches (uapi and blob)
#
object CheckCommand "cm_cache" {
  import "plugin-check-command"

  command = [ PluginDir + "/check_cm_memory_cache" ]

  arguments = {
    "--host"   = "$host$"
    "--port"   = "$port$"
    "--memory" = "$cache$"
  }
}

# enable Checks for Solr
#
# http://192.168.252.100:40080/solr/studio/select?q=feederstate%3A%22SUCCESS%22&wt=json&indent=true
#
object CheckCommand "cm_solr" {
  import "plugin-check-command"

  command = [ PluginDir + "/check_cm_solr" ]

  arguments = {
    "--host"   = "$host$"
    "--port"   = "$port$"
    "--repl"   = "$repl$"
  }
}
